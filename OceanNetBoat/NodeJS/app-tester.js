var loggerHelper = require('./helpers/logger_helper');
loggerHelper.init();
var models = require('./models');
var loggger = loggerHelper.logger;
models.sequelize.sync().then(function(){
    var socketHelper = require('./helpers/server-socket-helper');
    socketHelper.init();
    require('./helpers/gps-data-helper');
    setTimeout(function(){
        insertTestData();
    },2000)
});

async function insertTestData(){
    var rawData = '{"userName":"rameshg","boatName":"OceanNet","batchSize":50,"data":[{"gpsDataId":4324,"longitude":76.49011833333333,"latitude":9.092656666666668,"speed":0,"gpsDate":"2018-07-29T10:41:08.000Z","transferDate":null,"ssId":"OceanNet","signal":-96,"ccq":0,"noisef":-96,"distance":0,"frequency":null,"channel":null,"txrate":null,"rxrate":null,"boatId":17,"createdDate":"2018-07-29T17:27:51.030+05:30","trackingDataId":472515,"trackingDate":"2018-07-29T10:41:08.000Z"},{"gpsDataId":4325,"longitude":76.49011333333333,"latitude":9.092635,"speed":0,"gpsDate":"2018-07-29T10:42:08.000Z","transferDate":null,"ssId":"OceanNet","signal":-96,"ccq":0,"noisef":-96,"distance":0,"frequency":null,"channel":null,"txrate":null,"rxrate":null,"boatId":17,"createdDate":"2018-07-29T17:27:51.030+05:30","trackingDataId":472516,"trackingDate":"2018-07-29T10:42:08.000Z"},{"gpsDataId":4326,"longitude":76.490095,"latitude":9.092643333333331,"speed":0,"gpsDate":"2018-07-29T10:43:08.000Z","transferDate":null,"ssId":"OceanNet","signal":-96,"ccq":0,"noisef":-96,"distance":0,"frequency":null,"channel":null,"txrate":null,"rxrate":null,"boatId":17,"createdDate":"2018-07-29T17:27:51.030+05:30","trackingDataId":472517,"trackingDate":"2018-07-29T10:43:08.000Z"},{"gpsDataId":4327,"longitude":76.49008166666667,"latitude":9.092626666666666,"speed":0,"gpsDate":"2018-07-29T10:44:08.000Z","transferDate":null,"ssId":"OceanNet","signal":-96,"ccq":0,"noisef":-96,"distance":0,"frequency":null,"channel":null,"txrate":null,"rxrate":null,"boatId":17,"createdDate":"2018-07-29T17:27:51.030+05:30","trackingDataId":472518,"trackingDate":"2018-07-29T10:44:08.000Z"},{"gpsDataId":4328,"longitude":76.49008333333333,"latitude":9.092611666666668,"speed":0,"gpsDate":"2018-07-29T10:45:08.000Z","transferDate":null,"ssId":"OceanNet","signal":-96,"ccq":0,"noisef":-96,"distance":0,"frequency":null,"channel":null,"txrate":null,"rxrate":null,"boatId":17,"createdDate":"2018-07-29T17:27:51.030+05:30","trackingDataId":472519,"trackingDate":"2018-07-29T10:45:08.000Z"},{"gpsDataId":4329,"longitude":76.49010333333334,"latitude":9.092638333333332,"speed":0,"gpsDate":"2018-07-29T10:46:08.000Z","transferDate":null,"ssId":"OceanNet","signal":-96,"ccq":0,"noisef":-96,"distance":0,"frequency":null,"channel":null,"txrate":null,"rxrate":null,"boatId":17,"createdDate":"2018-07-29T17:27:51.030+05:30","trackingDataId":472520,"trackingDate":"2018-07-29T10:46:08.000Z"},{"gpsDataId":4330,"longitude":76.49011333333333,"latitude":9.092621666666666,"speed":0,"gpsDate":"2018-07-29T10:47:08.000Z","transferDate":null,"ssId":"OceanNet","signal":-96,"ccq":0,"noisef":-96,"distance":0,"frequency":null,"channel":null,"txrate":null,"rxrate":null,"boatId":17,"createdDate":"2018-07-29T17:27:51.031+05:30","trackingDataId":472521,"trackingDate":"2018-07-29T10:47:08.000Z"},{"gpsDataId":4331,"longitude":76.49013,"latitude":9.092621666666666,"speed":0,"gpsDate":"2018-07-29T10:48:08.000Z","transferDate":null,"ssId":"OceanNet","signal":-96,"ccq":0,"noisef":-96,"distance":0,"frequency":null,"channel":null,"txrate":null,"rxrate":null,"boatId":17,"createdDate":"2018-07-29T17:27:51.031+05:30","trackingDataId":472522,"trackingDate":"2018-07-29T10:48:08.000Z"},{"gpsDataId":4332,"longitude":76.49010833333334,"latitude":9.092628333333334,"speed":0,"gpsDate":"2018-07-29T10:49:08.000Z","transferDate":null,"ssId":"OceanNet","signal":-96,"ccq":0,"noisef":-96,"distance":0,"frequency":null,"channel":null,"txrate":null,"rxrate":null,"boatId":17,"createdDate":"2018-07-29T17:27:51.031+05:30","trackingDataId":472523,"trackingDate":"2018-07-29T10:49:08.000Z"},{"gpsDataId":4333,"longitude":76.490105,"latitude":9.092606666666669,"speed":0,"gpsDate":"2018-07-29T10:50:08.000Z","transferDate":null,"ssId":"OceanNet","signal":-96,"ccq":0,"noisef":-96,"distance":0,"frequency":null,"channel":null,"txrate":null,"rxrate":null,"boatId":17,"createdDate":"2018-07-29T17:27:51.031+05:30","trackingDataId":472524,"trackingDate":"2018-07-29T10:50:08.000Z"},{"gpsDataId":4334,"longitude":76.490095,"latitude":9.092605,"speed":0,"gpsDate":"2018-07-29T10:51:08.000Z","transferDate":null,"ssId":"OceanNet","signal":-96,"ccq":0,"noisef":-96,"distance":0,"frequency":null,"channel":null,"txrate":null,"rxrate":null,"boatId":17,"createdDate":"2018-07-29T17:27:51.031+05:30","trackingDataId":472525,"trackingDate":"2018-07-29T10:51:08.000Z"},{"gpsDataId":4335,"longitude":76.49010333333334,"latitude":9.092613333333333,"speed":0,"gpsDate":"2018-07-29T10:52:08.000Z","transferDate":null,"ssId":"OceanNet","signal":-96,"ccq":0,"noisef":-96,"distance":0,"frequency":null,"channel":null,"txrate":null,"rxrate":null,"boatId":17,"createdDate":"2018-07-29T17:27:51.031+05:30","trackingDataId":472526,"trackingDate":"2018-07-29T10:52:08.000Z"},{"gpsDataId":4336,"longitude":76.49008,"latitude":9.092611666666668,"speed":0,"gpsDate":"2018-07-29T10:53:08.000Z","transferDate":null,"ssId":"OceanNet","signal":-96,"ccq":0,"noisef":-96,"distance":0,"frequency":null,"channel":null,"txrate":null,"rxrate":null,"boatId":17,"createdDate":"2018-07-29T17:27:51.031+05:30","trackingDataId":472527,"trackingDate":"2018-07-29T10:53:08.000Z"},{"gpsDataId":4337,"longitude":76.49016333333333,"latitude":9.092641666666667,"speed":0,"gpsDate":"2018-07-29T10:54:08.000Z","transferDate":null,"ssId":"OceanNet","signal":-96,"ccq":0,"noisef":-96,"distance":0,"frequency":null,"channel":null,"txrate":null,"rxrate":null,"boatId":17,"createdDate":"2018-07-29T17:27:51.031+05:30","trackingDataId":472528,"trackingDate":"2018-07-29T10:54:08.000Z"},{"gpsDataId":4338,"longitude":76.49017,"latitude":9.092628333333334,"speed":0,"gpsDate":"2018-07-29T10:55:08.000Z","transferDate":null,"ssId":"OceanNet","signal":-96,"ccq":0,"noisef":-96,"distance":0,"frequency":null,"channel":null,"txrate":null,"rxrate":null,"boatId":17,"createdDate":"2018-07-29T17:27:51.031+05:30","trackingDataId":472529,"trackingDate":"2018-07-29T10:55:08.000Z"},{"gpsDataId":4339,"longitude":76.490085,"latitude":9.092636666666667,"speed":0,"gpsDate":"2018-07-29T10:56:08.000Z","transferDate":null,"ssId":"OceanNet","signal":-96,"ccq":0,"noisef":-96,"distance":0,"frequency":null,"channel":null,"txrate":null,"rxrate":null,"boatId":17,"createdDate":"2018-07-29T17:27:51.031+05:30","trackingDataId":472530,"trackingDate":"2018-07-29T10:56:08.000Z"},{"gpsDataId":4340,"longitude":76.49011166666666,"latitude":9.092603333333331,"speed":0,"gpsDate":"2018-07-29T10:57:08.000Z","transferDate":null,"ssId":"OceanNet","signal":-96,"ccq":0,"noisef":-96,"distance":0,"frequency":null,"channel":null,"txrate":null,"rxrate":null,"boatId":17,"createdDate":"2018-07-29T17:27:51.031+05:30","trackingDataId":472531,"trackingDate":"2018-07-29T10:57:08.000Z"},{"gpsDataId":4341,"longitude":76.49012666666667,"latitude":9.092636666666667,"speed":0,"gpsDate":"2018-07-29T10:58:08.000Z","transferDate":null,"ssId":"OceanNet","signal":-96,"ccq":0,"noisef":-96,"distance":0,"frequency":null,"channel":null,"txrate":null,"rxrate":null,"boatId":17,"createdDate":"2018-07-29T17:27:51.031+05:30","trackingDataId":472532,"trackingDate":"2018-07-29T10:58:08.000Z"},{"gpsDataId":4342,"longitude":76.49013333333333,"latitude":9.092665,"speed":0,"gpsDate":"2018-07-29T10:59:08.000Z","transferDate":null,"ssId":"OceanNet","signal":-96,"ccq":0,"noisef":-96,"distance":0,"frequency":null,"channel":null,"txrate":null,"rxrate":null,"boatId":17,"createdDate":"2018-07-29T17:27:51.031+05:30","trackingDataId":472533,"trackingDate":"2018-07-29T10:59:08.000Z"},{"gpsDataId":4343,"longitude":76.49012333333333,"latitude":9.092636666666667,"speed":0,"gpsDate":"2018-07-29T11:00:08.000Z","transferDate":null,"ssId":"OceanNet","signal":-96,"ccq":0,"noisef":-96,"distance":0,"frequency":null,"channel":null,"txrate":null,"rxrate":null,"boatId":17,"createdDate":"2018-07-29T17:27:51.031+05:30","trackingDataId":472534,"trackingDate":"2018-07-29T11:00:08.000Z"},{"gpsDataId":4344,"longitude":76.49010166666666,"latitude":9.092558333333333,"speed":0,"gpsDate":"2018-07-29T11:01:08.000Z","transferDate":null,"ssId":"OceanNet","signal":-96,"ccq":0,"noisef":-96,"distance":0,"frequency":null,"channel":null,"txrate":null,"rxrate":null,"boatId":17,"createdDate":"2018-07-29T17:27:51.031+05:30","trackingDataId":472535,"trackingDate":"2018-07-29T11:01:08.000Z"},{"gpsDataId":4345,"longitude":76.49010166666666,"latitude":9.092575,"speed":0,"gpsDate":"2018-07-29T11:02:08.000Z","transferDate":null,"ssId":"OceanNet","signal":-96,"ccq":0,"noisef":-96,"distance":0,"frequency":null,"channel":null,"txrate":null,"rxrate":null,"boatId":17,"createdDate":"2018-07-29T17:27:51.031+05:30","trackingDataId":472536,"trackingDate":"2018-07-29T11:02:08.000Z"},{"gpsDataId":4346,"longitude":76.49011166666666,"latitude":9.092551666666669,"speed":0,"gpsDate":"2018-07-29T11:03:08.000Z","transferDate":null,"ssId":"OceanNet","signal":-96,"ccq":0,"noisef":-96,"distance":0,"frequency":null,"channel":null,"txrate":null,"rxrate":null,"boatId":17,"createdDate":"2018-07-29T17:27:51.031+05:30","trackingDataId":472537,"trackingDate":"2018-07-29T11:03:08.000Z"},{"gpsDataId":4347,"longitude":76.49011833333333,"latitude":9.092538333333334,"speed":0,"gpsDate":"2018-07-29T11:04:08.000Z","transferDate":null,"ssId":"OceanNet","signal":-96,"ccq":0,"noisef":-96,"distance":0,"frequency":null,"channel":null,"txrate":null,"rxrate":null,"boatId":17,"createdDate":"2018-07-29T17:27:51.031+05:30","trackingDataId":472538,"trackingDate":"2018-07-29T11:04:08.000Z"},{"gpsDataId":4348,"longitude":76.49000833333334,"latitude":9.092558333333333,"speed":0,"gpsDate":"2018-07-29T11:05:08.000Z","transferDate":null,"ssId":"OceanNet","signal":-96,"ccq":0,"noisef":-96,"distance":0,"frequency":null,"channel":null,"txrate":null,"rxrate":null,"boatId":17,"createdDate":"2018-07-29T17:27:51.031+05:30","trackingDataId":472539,"trackingDate":"2018-07-29T11:05:08.000Z"},{"gpsDataId":4349,"longitude":76.49006666666666,"latitude":9.092575,"speed":0,"gpsDate":"2018-07-29T11:06:08.000Z","transferDate":null,"ssId":"OceanNet","signal":-96,"ccq":0,"noisef":-96,"distance":0,"frequency":null,"channel":null,"txrate":null,"rxrate":null,"boatId":17,"createdDate":"2018-07-29T17:27:51.031+05:30","trackingDataId":472540,"trackingDate":"2018-07-29T11:06:08.000Z"},{"gpsDataId":4350,"longitude":76.49008,"latitude":9.092556666666669,"speed":0,"gpsDate":"2018-07-29T11:07:08.000Z","transferDate":null,"ssId":"OceanNet","signal":-96,"ccq":0,"noisef":-96,"distance":0,"frequency":null,"channel":null,"txrate":null,"rxrate":null,"boatId":17,"createdDate":"2018-07-29T17:27:51.031+05:30","trackingDataId":472541,"trackingDate":"2018-07-29T11:07:08.000Z"},{"gpsDataId":4351,"longitude":76.490085,"latitude":9.092565,"speed":0,"gpsDate":"2018-07-29T11:08:08.000Z","transferDate":null,"ssId":"OceanNet","signal":-96,"ccq":0,"noisef":-96,"distance":0,"frequency":null,"channel":null,"txrate":null,"rxrate":null,"boatId":17,"createdDate":"2018-07-29T17:27:51.031+05:30","trackingDataId":472542,"trackingDate":"2018-07-29T11:08:08.000Z"},{"gpsDataId":4352,"longitude":76.49011,"latitude":9.092566666666666,"speed":0,"gpsDate":"2018-07-29T11:09:08.000Z","transferDate":null,"ssId":"OceanNet","signal":-96,"ccq":0,"noisef":-96,"distance":0,"frequency":null,"channel":null,"txrate":null,"rxrate":null,"boatId":17,"createdDate":"2018-07-29T17:27:51.031+05:30","trackingDataId":472543,"trackingDate":"2018-07-29T11:09:08.000Z"},{"gpsDataId":4353,"longitude":76.49011666666667,"latitude":9.09256,"speed":0,"gpsDate":"2018-07-29T11:10:08.000Z","transferDate":null,"ssId":"OceanNet","signal":-96,"ccq":0,"noisef":-96,"distance":0,"frequency":null,"channel":null,"txrate":null,"rxrate":null,"boatId":17,"createdDate":"2018-07-29T17:27:51.031+05:30","trackingDataId":472544,"trackingDate":"2018-07-29T11:10:08.000Z"},{"gpsDataId":4354,"longitude":76.490135,"latitude":9.092566666666666,"speed":0,"gpsDate":"2018-07-29T11:11:08.000Z","transferDate":null,"ssId":"OceanNet","signal":-96,"ccq":0,"noisef":-96,"distance":0,"frequency":null,"channel":null,"txrate":null,"rxrate":null,"boatId":17,"createdDate":"2018-07-29T17:27:51.031+05:30","trackingDataId":472545,"trackingDate":"2018-07-29T11:11:08.000Z"},{"gpsDataId":4355,"longitude":76.49015833333333,"latitude":9.092605,"speed":0,"gpsDate":"2018-07-29T11:12:08.000Z","transferDate":null,"ssId":"OceanNet","signal":-96,"ccq":0,"noisef":-96,"distance":0,"frequency":null,"channel":null,"txrate":null,"rxrate":null,"boatId":17,"createdDate":"2018-07-29T17:27:51.031+05:30","trackingDataId":472546,"trackingDate":"2018-07-29T11:12:08.000Z"},{"gpsDataId":4356,"longitude":76.490135,"latitude":9.092568333333332,"speed":0,"gpsDate":"2018-07-29T11:13:08.000Z","transferDate":null,"ssId":"OceanNet","signal":-96,"ccq":0,"noisef":-96,"distance":0,"frequency":null,"channel":null,"txrate":null,"rxrate":null,"boatId":17,"createdDate":"2018-07-29T17:27:51.031+05:30","trackingDataId":472547,"trackingDate":"2018-07-29T11:13:08.000Z"},{"gpsDataId":4357,"longitude":76.490145,"latitude":9.092531666666666,"speed":0,"gpsDate":"2018-07-29T11:14:08.000Z","transferDate":null,"ssId":"OceanNet","signal":-96,"ccq":0,"noisef":-96,"distance":0,"frequency":null,"channel":null,"txrate":null,"rxrate":null,"boatId":17,"createdDate":"2018-07-29T17:27:51.031+05:30","trackingDataId":472548,"trackingDate":"2018-07-29T11:14:08.000Z"},{"gpsDataId":4358,"longitude":76.49015333333334,"latitude":9.092511666666669,"speed":0,"gpsDate":"2018-07-29T11:15:08.000Z","transferDate":null,"ssId":"OceanNet","signal":-96,"ccq":0,"noisef":-96,"distance":0,"frequency":null,"channel":null,"txrate":null,"rxrate":null,"boatId":17,"createdDate":"2018-07-29T17:27:51.031+05:30","trackingDataId":472549,"trackingDate":"2018-07-29T11:15:08.000Z"},{"gpsDataId":4359,"longitude":76.49015166666666,"latitude":9.092498333333332,"speed":0,"gpsDate":"2018-07-29T11:16:08.000Z","transferDate":null,"ssId":"OceanNet","signal":-96,"ccq":0,"noisef":-96,"distance":0,"frequency":null,"channel":null,"txrate":null,"rxrate":null,"boatId":17,"createdDate":"2018-07-29T17:27:51.031+05:30","trackingDataId":472550,"trackingDate":"2018-07-29T11:16:08.000Z"},{"gpsDataId":4360,"longitude":76.490155,"latitude":9.092486666666666,"speed":0,"gpsDate":"2018-07-29T11:17:08.000Z","transferDate":null,"ssId":"OceanNet","signal":-96,"ccq":0,"noisef":-96,"distance":0,"frequency":null,"channel":null,"txrate":null,"rxrate":null,"boatId":17,"createdDate":"2018-07-29T17:27:51.031+05:30","trackingDataId":472551,"trackingDate":"2018-07-29T11:17:08.000Z"},{"gpsDataId":4361,"longitude":76.49016666666667,"latitude":9.092491666666668,"speed":0,"gpsDate":"2018-07-29T11:18:08.000Z","transferDate":null,"ssId":"OceanNet","signal":-96,"ccq":0,"noisef":-96,"distance":0,"frequency":null,"channel":null,"txrate":null,"rxrate":null,"boatId":17,"createdDate":"2018-07-29T17:27:51.031+05:30","trackingDataId":472552,"trackingDate":"2018-07-29T11:18:08.000Z"},{"gpsDataId":4362,"longitude":76.49015333333334,"latitude":9.09249,"speed":0,"gpsDate":"2018-07-29T11:19:08.000Z","transferDate":null,"ssId":"OceanNet","signal":-96,"ccq":0,"noisef":-96,"distance":0,"frequency":null,"channel":null,"txrate":null,"rxrate":null,"boatId":17,"createdDate":"2018-07-29T17:27:51.031+05:30","trackingDataId":472553,"trackingDate":"2018-07-29T11:19:08.000Z"},{"gpsDataId":4363,"longitude":76.49018,"latitude":9.092476666666666,"speed":0,"gpsDate":"2018-07-29T11:20:08.000Z","transferDate":null,"ssId":"OceanNet","signal":-96,"ccq":0,"noisef":-96,"distance":0,"frequency":null,"channel":null,"txrate":null,"rxrate":null,"boatId":17,"createdDate":"2018-07-29T17:27:51.031+05:30","trackingDataId":472554,"trackingDate":"2018-07-29T11:20:08.000Z"},{"gpsDataId":4364,"longitude":76.490205,"latitude":9.09246,"speed":0,"gpsDate":"2018-07-29T11:21:08.000Z","transferDate":null,"ssId":"OceanNet","signal":-96,"ccq":0,"noisef":-96,"distance":0,"frequency":null,"channel":null,"txrate":null,"rxrate":null,"boatId":17,"createdDate":"2018-07-29T17:27:51.031+05:30","trackingDataId":472555,"trackingDate":"2018-07-29T11:21:08.000Z"},{"gpsDataId":4365,"longitude":76.49019666666666,"latitude":9.09245,"speed":0,"gpsDate":"2018-07-29T11:22:08.000Z","transferDate":null,"ssId":"OceanNet","signal":-96,"ccq":0,"noisef":-96,"distance":0,"frequency":null,"channel":null,"txrate":null,"rxrate":null,"boatId":17,"createdDate":"2018-07-29T17:27:51.031+05:30","trackingDataId":472556,"trackingDate":"2018-07-29T11:22:08.000Z"},{"gpsDataId":4366,"longitude":76.49018666666667,"latitude":9.092463333333331,"speed":0,"gpsDate":"2018-07-29T11:23:08.000Z","transferDate":null,"ssId":"OceanNet","signal":-96,"ccq":0,"noisef":-96,"distance":0,"frequency":null,"channel":null,"txrate":null,"rxrate":null,"boatId":17,"createdDate":"2018-07-29T17:27:51.031+05:30","trackingDataId":472557,"trackingDate":"2018-07-29T11:23:08.000Z"},{"gpsDataId":4367,"longitude":76.49018833333334,"latitude":9.092498333333332,"speed":0,"gpsDate":"2018-07-29T11:24:08.000Z","transferDate":null,"ssId":"OceanNet","signal":-96,"ccq":0,"noisef":-96,"distance":0,"frequency":null,"channel":null,"txrate":null,"rxrate":null,"boatId":17,"createdDate":"2018-07-29T17:27:51.031+05:30","trackingDataId":472558,"trackingDate":"2018-07-29T11:24:08.000Z"},{"gpsDataId":4368,"longitude":76.49015166666666,"latitude":9.0925,"speed":0,"gpsDate":"2018-07-29T11:25:08.000Z","transferDate":null,"ssId":"OceanNet","signal":-96,"ccq":0,"noisef":-96,"distance":0,"frequency":null,"channel":null,"txrate":null,"rxrate":null,"boatId":17,"createdDate":"2018-07-29T17:27:51.031+05:30","trackingDataId":472559,"trackingDate":"2018-07-29T11:25:08.000Z"},{"gpsDataId":4369,"longitude":76.49013333333333,"latitude":9.09252,"speed":0,"gpsDate":"2018-07-29T11:26:08.000Z","transferDate":null,"ssId":"OceanNet","signal":0,"ccq":0,"noisef":-96,"distance":0,"frequency":null,"channel":null,"txrate":null,"rxrate":null,"boatId":17,"createdDate":"2018-07-29T17:27:51.031+05:30","trackingDataId":472560,"trackingDate":"2018-07-29T11:26:08.000Z"},{"gpsDataId":4370,"longitude":76.49013,"latitude":9.09256,"speed":0,"gpsDate":"2018-07-29T11:27:08.000Z","transferDate":null,"ssId":"OceanNet","signal":0,"ccq":0,"noisef":-96,"distance":0,"frequency":null,"channel":null,"txrate":null,"rxrate":null,"boatId":17,"createdDate":"2018-07-29T17:27:51.031+05:30","trackingDataId":472561,"trackingDate":"2018-07-29T11:27:08.000Z"},{"gpsDataId":4371,"longitude":76.49012,"latitude":9.092548333333331,"speed":0,"gpsDate":"2018-07-29T11:28:08.000Z","transferDate":null,"ssId":"OceanNet","signal":0,"ccq":0,"noisef":-96,"distance":0,"frequency":null,"channel":null,"txrate":null,"rxrate":null,"boatId":17,"createdDate":"2018-07-29T17:27:51.031+05:30","trackingDataId":472562,"trackingDate":"2018-07-29T11:28:08.000Z"},{"gpsDataId":4372,"longitude":76.49015166666666,"latitude":9.09257,"speed":0,"gpsDate":"2018-07-29T11:29:08.000Z","transferDate":null,"ssId":"OceanNet","signal":0,"ccq":0,"noisef":-96,"distance":0,"frequency":null,"channel":null,"txrate":null,"rxrate":null,"boatId":17,"createdDate":"2018-07-29T17:27:51.031+05:30","trackingDataId":472563,"trackingDate":"2018-07-29T11:29:08.000Z"},{"gpsDataId":4373,"longitude":76.490115,"latitude":9.092628333333334,"speed":0,"gpsDate":"2018-07-29T11:30:09.000Z","transferDate":null,"ssId":"OceanNet","signal":0,"ccq":0,"noisef":-96,"distance":0,"frequency":null,"channel":null,"txrate":null,"rxrate":null,"boatId":17,"createdDate":"2018-07-29T17:27:51.031+05:30","trackingDataId":472564,"trackingDate":"2018-07-29T11:30:09.000Z"}]}';
    var rawO = JSON.parse(rawData);
    var gpsDataHelper = require('./helpers/gps-data-helper');
    let gpsDatum = [];
    for(let a=0;a<rawO.data.length;a++){
        let inputData = rawO.data[a];
        let gpsData = {};
        gpsData.longitude = inputData.longitude;
        gpsData.latitude = inputData.longitude;
        gpsData.gpsDate = new Date(inputData.gpsDate);
        gpsData.speed = inputData.speed;
        gpsData.gpsDataId = gpsDataHelper.getNextMaxKey();
        gpsData.ssId = inputData.ssId;
        gpsData.signal = inputData.signal;
        gpsData.noisef = inputData.noisef;
        gpsData.ccq = inputData.ccq;
        gpsData.distance = inputData.distance;
        gpsData.frequency = inputData.frequency;
        gpsData.channel = inputData.channel;
        gpsData.txrate = inputData.txrate;
        gpsData.rxrate = inputData.rxrate;
        gpsData.POS = 30;
        gpsData.DIR = 'fwd';
        gpsDatum.push(gpsData);
        await gpsDataHelper.create(gpsData);
    }
    // sendData(gpsDatum);
    gpsDataHelper.sendPendingRecords(0,gpsDataHelper);
}

async function sendData(gpsDatum){
    var gpsDataHelper = require('./helpers/gps-data-helper');
    var socketHelper = require('./helpers/server-socket-helper');
    if(gpsDatum.length > 0){
        let gpsData = gpsDatum.shift(0)
        await gpsDataHelper.create(gpsData);
        socketHelper.sendData(gpsData);
        setTimeout(function(){
            sendData(gpsDatum);
        },1000)
    }
}